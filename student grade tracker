package task;

import javax.swing.*;
import java.awt.*;
import java.util.ArrayList;

interface StudentOperations {
    void addStudent(String name, int score);
    void showReport();
}

class Student {
    String name; 
    int score;

    Student(String name, int score) {
        this.name = name;
        this.score = score;
    }
}

public class StudentGradeGUI extends JFrame implements StudentOperations {

    private JTextField nameField, scoreField;
    private JTextArea outputArea;
    private ArrayList<Student> students = new ArrayList<>();

    public StudentGradeGUI() {

        setTitle("Student Grade Management System");
        setSize(500, 400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new BorderLayout());

        JPanel inputPanel = new JPanel(new GridLayout(3, 2, 10, 10));

        inputPanel.add(new JLabel("Student Name:"));
        nameField = new JTextField();  
        inputPanel.add(nameField);

        inputPanel.add(new JLabel("Score:"));
        scoreField = new JTextField();
        inputPanel.add(scoreField);

        JButton addBtn = new JButton("Add Student");
        JButton reportBtn = new JButton("Show Report");

        inputPanel.add(addBtn);
        inputPanel.add(reportBtn);

        add(inputPanel, BorderLayout.NORTH);

        outputArea = new JTextArea();
        outputArea.setEditable(false);
        add(new JScrollPane(outputArea), BorderLayout.CENTER);

        addBtn.addActionListener(e -> {
            try {
                String name = nameField.getText();
                int score = Integer.parseInt(scoreField.getText());
                addStudent(name, score);
                outputArea.setText("Student added successfully!");
                nameField.setText("");
                scoreField.setText("");
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(this, "Invalid input!");
            }
        });

        reportBtn.addActionListener(e -> showReport());

        setVisible(true);
    }

    public void addStudent(String name, int score) {
        students.add(new Student(name, score));
    }

    public void showReport() {
        if (students.isEmpty()) {
            outputArea.setText("No students available.");
            return;
        }

        int total = 0;
        int highest = students.get(0).score;
        int lowest = students.get(0).score;

        StringBuilder sb = new StringBuilder();
        sb.append("Name\tScore\n");

        for (Student s : students) {
            sb.append(s.name).append("\t").append(s.score).append("\n");
            total += s.score;
            highest = Math.max(highest, s.score);
            lowest = Math.min(lowest, s.score);
        }

        double avg = (double) total / students.size();

        sb.append("\nAverage: ").append(avg);
        sb.append("\nHighest: ").append(highest);
        sb.append("\nLowest : ").append(lowest);

        outputArea.setText(sb.toString());
    }

    public static void main(String[] args) {
        new StudentGradeGUI();
    }
}
